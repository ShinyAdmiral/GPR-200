// Code by Rhys Sullivan and Andrew Hunt
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    //get inverse resolution
    vec2 resInv 	= 1.0 / iResolution.xy;
    
    //get normalized coords
    vec2 uv 		= fragCoord * resInv;
    
    //gather reset input
    float reset = texture(iChannel1, uv).w;
    
    //get previous coords
    vec2 current 	= texture(iChannel0, uv).xy * reset;
    vec2 origin 	= texture(iChannel0, uv).zw * reset;
    
    //track  input if mouse down
    if(iMouse.z >= 0.0)
    {
        //get current position of mouse
    	vec2 click 	= iMouse.zw * resInv;
        vec2 mouse 	= iMouse.xy * resInv; 
        
        //get position relative to the center
        vec2 center 	= click + (click - vec2(0.5, 0.5));
        vec2 mouseRev = mouse + (mouse - vec2(0.5, 0.5));
        
        //get final position relative to the origin
        vec2 RadPos	= origin - (mouseRev - center);
        
        //return new position
        fragColor 		= vec4(RadPos, origin);
    }
    
    else
    {
        //only display old coords if not using
    	fragColor 		= vec4(current, current);
    }
}